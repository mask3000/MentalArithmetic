import{_ as T,r as D,H,D as O,h as V,C as E,q as g,d as F,o,c as s,b as m,F as f,e as h,u as M,f as v,w,x as q,B as y,t as b,I as x,j as S,p as z,a as A}from"./index.d02e6687.js";import{u as R}from"./app.fc418c67.js";const W=u=>(z("data-v-fe87e5ca"),u=u(),A(),u),j={class:"A4"},L=W(()=>m("br",null,null,-1)),Y={class:"row"},G={key:0,class:"btn"},J={__name:"Print",setup(u){const a=D(!1),C=H(),P=O(),k=R(),$=V(()=>k.printPreviewPapers.map(e=>{const{paperTitle:i,paperSubTitle:r,numberOfPagerColumns:t,solution:l,formulas:n}=e,p=n.length/t,d=100/t,N=l=="0"?"16px":"160px";let c=[],_=0;for(;_<n.length;)c.push(n.slice(_,p+_)),_+=p;return c=c.reverse(),console.log(c),{paperTitle:i,paperSubTitle:r,columnsOfPaper:c,colWidth:d,rowHeight:N}}));E(()=>{const e=new Date,i=e.getFullYear(),r=e.getMonth()+1,t=e.getDate(),l=e.getHours(),n=e.getMinutes(),p=e.getSeconds(),d=`${i}${r}${t}${l}${n}${p}`;console.log(d),document.title=C.query.fileName+d,window.onbeforeprint=()=>{console.log("before"),a.value=!0},window.onafterprint=()=>{console.log("after"),g(()=>{a.value=!1})}});const B=()=>{P.back()},I=()=>{a.value=!0,g(()=>{window.print()})};return(e,i)=>{const r=F("ElButton");return o(),s("div",{class:y({preview:!a.value})},[m("div",j,[(o(!0),s(f,null,h(M($),t=>(o(),s("div",{class:y(["sheet padding-10mm",{"sheet-shadow":!a.value}])},[m("h3",null,b(t.paperSubTitle),1),L,m("div",Y,[(o(!0),s(f,null,h(t.columnsOfPaper,l=>(o(),s("div",{style:x(`width: ${t.colWidth}%;`)},[(o(!0),s(f,null,h(l,n=>(o(),s("p",{style:x(`margin-bottom: ${t.rowHeight}`)},b(n),5))),256))],4))),256))])],2))),256)),a.value?q("",!0):(o(),s("div",G,[v(r,{onClick:B},{default:w(()=>[S("\u8FD4\u56DE")]),_:1}),v(r,{class:"mr-2 w-32",type:"primary",onClick:I},{default:w(()=>[S("\u6253\u5370")]),_:1})]))])],2)}}},U=T(J,[["__scopeId","data-v-fe87e5ca"]]);export{U as default};
